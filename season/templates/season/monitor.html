{% extends "base.html" %}
{% load static %}
{% load blog_tags %}

<!---- TITLE --------->
{% block title.     %}DashBoard {% endblock %}
{% block breadcrumb %}DashBoard {% endblock %}

<!---- STYLE --------->
{% block css %}

<style>
   /* Formula Cards CSS */
   .teamdiv
   {
      border-style: solid;
      border-width:10px;
      border-color: #0f111d;
      padding: 8px;
      background-image: linear-gradient(#DA6020, #D52423);
      border-radius: 25px;

   }
   .academy_tab img{
      width: 60px !important;
      max-width:60px;
      height: 60px;
      margin:0px 15px 0px 15px;
   }
   .formula{
      font-weight:bold;
      color: white;
      margin: 10px 0px 10px 10px;
   }
   .title{
      margin:0px 5px 0px 15px;
      color: white;

   }
   .name{
      margin:5px 5px 0px 15px;
      font-weight: 700;
      color: white;
   }
   /* League Table CSS */
   .myteam{
      background-color: #DA6020;
   }
   .table-sm th, .table-sm td {
       padding: 0.3rem;
   }
   td.teamInfo{
      padding: 0rem;
   }
   .card{
      border-width:2px;
      border-color:#DA6020;
   }
</style>
{% endblock %}

<!---- BODY CONTENT --------->
{% block content %}

  <div class="container-fluid">
      <div class="row justify-content-md-center pl-2 pr-2">

         <div class="col-xl-4 col-md-6" >
             {% tag_player_card %}
         </div>

         <div class="col-xl-4 col-md-6">
              {% tag_pi_formula_points %}
         </div>

         <div class="col-xl-4 col-md-6" >
              {% tag_events_so_far %}
         </div>

         <!-- TEAM DIVS ------>
         <div class="container-fluid">
           <div class="row">

             <!--- Formula 1 --->
             <div class=" col-xl-3 col-sm-6 teamdiv" >
                <h4 class = "formula">Formula 1</h4>
                <table class = "academy_tab" width="100%">
                   <tr>
                      <td>
                        <img class = "image-fluid rounded-circle" src="{% if user.team.p1_1.id %} {{ user.team.p1_1.mugshot.url}} {% else %} /static/academy/webPageImages/blankUser.jpg {% endif %}" />
                     </td>
                     <td>
                        <p class = "name" >{{ user.team.p1_1}}</p>
                        <p class = "title" >Lead Driver</p>
                     </td>
                  </tr>
                  <tr>
                     <td>
                        <img class = "image-fluid rounded-circle" src="{% if user.team.p1_2.id %} {{ user.team.p1_2.mugshot.url}} {% else %} /static/academy/webPageImages/blankUser.jpg {% endif %}" />
                     </td>
                     <td>
                        <p class = "name" >{{ user.team.p1_2}}</p>
                        <p class = "title" >Second Driver</p>
                     </td>
                  </tr>
               </table>
               <br/>
             </div>


             <!--- Formula 2 --->
             <div class="col-xl-3 col-sm-6 teamdiv" >
                <h4 class = "formula">Formula 2</h4>
                <table class = "academy_tab">
                   <tr>
                      <td>
                        <img class = "image-fluid rounded-circle" src="{{ user.team.p2_1.mugshot.url}}" />
                     </td>
                     <td>
                        <p class = "name" >{{ user.team.p2_1}}</p>
                        <p class = "title" >Lead Driver</p>
                     </td>
                  </tr>
                  <tr>
                     <td>
                        <img class = "image-fluid rounded-circle" src="{% if user.team.p2_2.id %} {{ user.team.p2_2.mugshot.url}} {% else %} /static/academy/webPageImages/blankUser.jpg {% endif %}" />
                     </td>
                     <td>
                        <p class = "name" >{{ user.team.p2_2}}</p>
                        <p class = "title" >Second Driver</p>
                     </td>
                  </tr>
               </table>
               <br/>
             </div>

             <!--- Formula 3 --->
             <div class="col-xl-3 col-sm-6 teamdiv" >
                <h4 class = "formula">Formula 3</h4>
                <table class = "academy_tab">
                   <tr>
                      <td>
                        <img class = "image-fluid rounded-circle" src="{% if user.team.p3_1.id %} {{ user.team.p3_1.mugshot.url}} {% else %} /static/academy/webPageImages/blankUser.jpg {% endif %}" />
                     </td>
                     <td>
                        <p class = "name" >{{ user.team.p3_1}}</p>
                        <p class = "title" >Lead Driver</p>
                     </td>
                  </tr>
                  <tr>
                     <td>
                        <img class = "image-fluid rounded-circle" src="{% if user.team.p3_2.id %} {{ user.team.p3_2.mugshot.url}} {% else %} /static/academy/webPageImages/blankUser.jpg {% endif %}" />
                     </td>
                     <td>
                        <p class = "name" >{{ user.team.p3_2}}</p>
                        <p class = "title" >Second Driver</p>
                     </td>
                  </tr>
               </table>
               <br/>
             </div>

             <!--- W Series--->
             <div class="col-xl-3 col-sm-6 teamdiv">
                <h4 class = "formula">W Series</h4>
                <table class = "academy_tab">
                   <tr>
                      <td>
                        <img class = "image-fluid rounded-circle" src="{% if user.team.pw_1.id %} {{ user.team.pw_1.mugshot.url}} {% else %} /static/academy/webPageImages/blankUser.jpg {% endif %}" />
                     </td>
                     <td>
                        <p class = "name" >{{ user.team.pw_1}}</p>
                        <p class = "title" >Lead Driver</p>
                     </td>
                  </tr>
                  <tr>
                     <td>
                        <img class = "image-fluid rounded-circle" src="{% if user.team.pw_2.id %} {{ user.team.pw_2.mugshot.url}} {% else %} /static/academy/webPageImages/blankUser.jpg {% endif %}" />
                     </td>
                     <td>
                        <p class = "name" >{{ user.team.pw_2}}</p>
                        <p class = "title" >Second Driver</p>
                     </td>
                  </tr>
               </table>
               <br/>
             </div>

           </div>
         </div>

         <!---Graph ------------------------------------>
         <div class="container-fluid" id = "PersonalChart">
            <div class="row justify-content-md-center">
                <div class="col-sm-12">
                    <div class="card">
                        <div class="card-body">
                            <h3 class="card-title mb-3">Season Results So Far - {{ user.team.teamName }}</h3>

                            <!--Top RHS legends
                            <div class="row justify-content-end">
                                <div class="col-xl-12 align-self-center">
                                    <ul class="list-unstyled list-inline float-right" id="tour1">
                                        <li class="list-inline-item px-3">
                                            <h5 class="mt-0">After 8 of 23 rounds </h5>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            -->
                            <!-- THE ACTUAL GRAPH -->
                            <div id="extra-area-chart" class="morris-charts project-budget-chart" style="height: 322px;" dir="ltr" ></div>

                        </div>
                    </div>
                </div>
            </div>
         </div>

         <!-- League table --->
         <div class="card  col-12 pt-3 pl-3 pr-3" >
            <h3>My Closest Rivals: </h3>
            <div>
               <table class="table table-sm table-hover top5table">
                  <thead>
                     <tr>
                        <th class="pr-3">Pos. (overall)</th>
                        <th> </th>
                        <th> Team </th>
                        <th class="text-right {% if heading == 'F1 only'  %} h4 text-bold{% endif%}" > <a href="{% url 'leagueposition'%}?tab=F1">F1 Points</a> </th>
                        <th class="text-right {% if heading == 'F2 only'  %} h4 text-bold{% endif%}" > <a href="{% url 'leagueposition'%}?tab=F2">F2 Points</a></th>
                        <th class="text-right {% if heading == 'F3 only'  %} h4 text-bold{% endif%}" > <a href="{% url 'leagueposition'%}?tab=F3">F3 Points</a></th>
                        <th class="text-right {% if heading == 'W Series' %} h4 text-bold{% endif%}"> <a href="{% url 'leagueposition'%}?tab=WS">WS Points</a></th>
                        <th class="text-right {% if heading == 'Overall'  %} h4 text-bold{% endif%}" > <a href="{% url 'leagueposition'%}">Total Points</a></th>
                     </tr>
                  </thead>
                  {% for team in sublist %}
                  {% if user.team.teamName  ==  team.2 %}
                  <tr data-toggle="collapse" data-target="#accordion{{ forloop.counter }}" class="clickable myteam">
                  {% else %}
                  <tr data-toggle="collapse" data-target="#accordion{{ forloop.counter }}" class="clickable">
                  {% endif %}
                     <td style="width:10%" class="text-center align-middle pr-3"><b style="font-size:1.2rem;">{{ team.0 }}</b>&nbsp; ({{ team.8 }})</td>
                     <td style="width:20%"> <center><img class="rounded-circle" src=" {{team.1}}"></center> </td>
                     <td style="width:30%"class="align-middle text-left"> {{team.2}}   </td>
                     <td class="align-middle text-right {% if heading == 'F1 only' %} h4 text-bold{% endif%}"> {{team.3 |floatformat:0 }} </td>
                     <td class="align-middle text-right {% if heading == 'F2 only' %} h4 text-bold{% endif%}"> {{team.4 |floatformat:0 }} </td>
                     <td class="align-middle text-right {% if heading == 'F3 only' %} h4 text-bold{% endif%}"> {{team.5 |floatformat:0 }} </td>
                     <td class="align-middle text-right {% if heading == 'W Series'%} h4 text-bold{% endif%}"> {{team.6 |floatformat:0 }} </td>
                     <td class="align-middle text-right {% if heading == 'Overall' %} h4 text-bold{% endif%}"> {{team.7 |floatformat:0 }} </td>
                  </tr>
                  <tr>
                     <td colspan="8" class = "teamInfo">
                        <div id="accordion{{ forloop.counter }}" class="collapse" >
                           <div class="row p-2">
                               <div class="col-md-6 col-xl-6">
                                   <div class="card text-white bg-info pb-0 mb-2">
                                       <div class="card-body" >
                                          <span style="float:left; width:70%">
                                             <blockquote class="card-bodyquote mb-0">
                                               <h3 class = "mb-3">{{team.2}} - F1</h3>
                                               <h5 class = "pl-3 pr-3"><b>Driver 1 :</b> {{team.9}}</h5>
                                               <h5 class = "pl-3 pr-3"><b>Driver 2:</b>  {{team.10}}</h5>
                                             </blockquote>
                                          </span>
                                          <span class = "pl-3" style="width:25%">
                                             <img src="{% static 'season/siteimages/F1.png' %}" height="100px" >
                                          </span>
                                       </div>
                                   </div>
                               </div>
                               <div class="col-md-6 col-xl-6">
                                   <div class="card text-white bg-info pb-0 mb-2">
                                       <div class="card-body">
                                          <span style="float:left; width:70%">
                                             <blockquote class="card-bodyquote mb-0">
                                               <h3 class = "mb-3">F2</h3>
                                               <h5 class = "pl-3 pr-3"><b>Driver 1 :</b> {{team.11}}</h5>
                                               <h5 class = "pl-3 pr-3"><b>Driver 2:</b>  {{team.12}}</h5>
                                             </blockquote>
                                          </span>
                                          <span class = "pl-3" style="width:25%">
                                             <img src="{% static 'season/siteimages/F2.png' %}" height="100px" >
                                          </span>
                                       </div>
                                   </div>
                               </div>

                               <div class="col-md-6 col-xl-6">
                                   <div class="card text-white bg-info pb-0 mb-1">
                                       <div class="card-body">
                                          <span style="float:left; width:70%">
                                             <blockquote class="card-bodyquote mb-0">
                                               <h3 class = "mb-3">F3</h3>
                                               <h5 class = "pl-3 pr-3"><b>Driver 1 :</b> {{team.13}}</h5>
                                               <h5 class = "pl-3 pr-3"><b>Driver 2:</b>  {{team.14}}</h5>
                                             </blockquote>
                                          </span>
                                          <span class = "pl-3" style="width:25%">
                                             <img src="{% static 'season/siteimages/F3.png' %}" height="100px" >
                                          </span>
                                       </div>
                                   </div>
                               </div>

                               <div class="col-md-6 col-xl-6">
                                   <div class="card text-white bg-info pb-0 mb-1">
                                       <div class="card-body">
                                          <span style="float:left; width:70%">
                                             <blockquote class="card-bodyquote mb-0">
                                               <h3 class = "mb-3">W Series</h3>
                                               <h5 class = "pl-3 pr-3"><b>Driver 1 :</b> {{team.15}}</h5>
                                               <h5 class = "pl-3 pr-3"><b>Driver 2:</b>  {{team.16}}</h5>
                                             </blockquote>
                                          </span>
                                          <span class = "pl-3" style="width:25%">
                                             <img src="{% static 'season/siteimages/W.png' %}" height="100px" >
                                          </span>
                                       </div>
                                   </div>
                               </div>
                           </div>
                        </div>
                     </td>
                  </tr>
                  {% endfor %}
               </table>
            </div>
         </div>


      </div>
  </div> <!-- container-fluid -->

<!-- end main content-->
{% endblock %}


<!---------------------- FOOTER BLOCK  ------------------->
{% block footer %}
{% endblock %}


<!---------------------- JAVASCRIPT BLOCK  ------------------->
{% block javascript %}


   //Collapse LHS menu bar to show more screen
   if($(window).width() > 992) {
     $("#vertical-menu-btn").click();
   }

   Morris.Area( {
      element: 'extra-area-chart', data:
      [
      {% for w in weekend_posns %}
         {y: '{{w.0}}  ' , a: {{w.2}} , b: {{w.1}} },
      {% endfor %}
      ],                                         //   [{y: 'BAH', a: 10},{y: 'EMI', a: 15},{y: 'POR', a: 25},{y: 'SPA', a: 20}],
      lineColors: [ '#009688','#fdb93e' ] ,       // , '#148cca'],
      xkey: 'y',
      ykeys: [ 'a', 'b'],                        //, 'c'],
      //ymax:50,
      //ymin:-20,
      parseTime: false,                          //Stops the date formatting
      labels: [ 'Best Score', '{{ user.team.teamName }}' ],
      pointSize: 0, lineWidth: 0,
      resize: true,
      fillOpacity: 0.8,
      behaveLikeLine: true,
      gridLineColor: 'rgba(108, 120, 151, 0.6)',
      hideHover: 'auto'
   }
);
{% endblock %}

<!---------------------- JAVASCRIPT LIBRARIES BLOCK  ------------------->

{% block pagescripts %}
<!--Morris Chart-->
<script src="{% static 'season/assets/libs/morris.js/morris.min.js' %}"></script>
<script src="{% static 'season/assets/libs/raphael/raphael.min.js' %}"></script>
{% endblock %}
