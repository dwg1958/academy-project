{% extends "base.html" %}
{% load static %}

<!---- TITLE --------->
{% block title %}
{{ user.team.teamName }}
{% endblock %}
{% block breadcrumb %}
My Team
{% endblock %}

<!---- STYLE --------->
{% block css %}
<!---This css makes scroller in process box stay in shape -->
<link href="{% static 'season/assets/libs/metrojs/release/MetroJs.Full/MetroJs.min.css' %}" rel="stylesheet" type="text/css" />

<style>

   img{
      vertical-align:middle;
   }
   .formula{
      font-weight:bold;
      color: white;
      margin-top: 10px;
      margin-bottom: 10px;
   }
   .title{
      margin:0px 5px 0px 15px;
      color: white;

   }
   .name{
      margin:5px 5px 0px 15px;
      font-weight: 700;
      color: white;
   }
   .teamdiv
   {
      border-style: solid;
      border-width:10px;
      border-color: #0f111d;
      padding: 8px;
      background-image: linear-gradient(#DA6020, #D52423);
      border-radius: 25px;

   }
   .container-fluid img{
      height: 33px;
      width: 33px;
      margin:0px 5px 0px 15px;
   }
   .academy_tab img{
      width: 88px !important;
      max-width:88px;
      height: 88px;
      margin:15px 15px 0px 15px;
   }
   .btn{
      float: right;
   }
   .radio-selector label{
      padding-left: 8px;
   }
   .pickertable {
      width:100%;
      margin:10px 5px 10px 0px;
      overflow-y: auto; height: 600px;
   }
   .pickertable td{
      border-collapse: collapse;
      border: 1px solid black;
      height:45px;
      text-align:center;
   }
   .pickertable thead th {
      background-color: #DA6020;
      color: white;
      border-collapse: collapse;
      border: 1px solid black;
      height:45px;
      padding-left: 8px;
      position: sticky; top: 0;
      margin: 0 auto;
   }
   .my-custom-scrollbar {
      position: relative;
      height: 600px;
      overflow: auto;
   }
   .table-wrapper-scroll-y {
      display: block;
   }
   .budget-table{
      margin-top:100px;
   }
   .budget-table td {
      padding-right:20px;
   }
   #f1_p2_cost, #f2_p2_cost, #f3_p2_cost, #ws_p2_cost{
      text-decoration:underline;
   }
   .results-l{
      font-weight: 400;
      color: white;
      text-align:left;
      padding-left:10%;
      width: 90%;
   }
   .results-r{
      font-weight: 600;
      color: white;
      text-align:right;
      padding-right:4%;
      width: 25%;

   }
   input[type='radio']:after {
        width: 15px;
        height: 15px;
        border-radius: 15px;
        top: -2px;
        left: -1px;
        /*position: relative;*/
        background-color: white;
        content: '';
        display: inline-block;
        visibility: visible;
        border: 2px solid white;
    }

    input[type='radio']:checked:after {
        width: 15px;
        height: 15px;
        border-radius: 15px;
        top: -2px;
        left: -1px;
        /*position: relative;*/
        background-color: #DA6020;
        content: '';
        display: inline-block;
        visibility: visible;
        border: 2px solid white;
    }
    .progress{
      background-color: #666;
    }
    .f_badges{
      height:45px;
      width: 45px;
    }
</style>
{% endblock %}

<!---- BODY CONTENT --------->
{% block content %}
<div style = "padding: 0% 2% 10% 2%;">

   {% if not returnmessage %}
   {% else %}
   <h3 style = "background-color: red; color:white;"><center>{{ returnmessage }}</center></h3>
   <br/>
   {% endif %}
   <!--<img src = "{{teamdata.teamLogo.url}} " height= "150" class = "mb-2">-->

   <h2>{{teamdata.teamName}} Team Line-up</h2>
   <br /><br />
   <div class="tabs-menu">
       <ul class="nav nav-pills">
           <li class="nav-item">
         <!--   <a href="#academy" class="nav-link active" data-toggle="tab">Academy</a>-->
           <a href="{% url 'teamview'%}" class="nav-link active" >Academy</a>
           </li>
           <li class="nav-item">
               <a href="#F1" class="nav-link" data-toggle="tab">Formula 1</a>
           </li>
           <li class="nav-item">
               <a href="#F2" class="nav-link" data-toggle="tab">Formula 2</a>
           </li>
           <li class="nav-item">
               <a href="#F3" class="nav-link" data-toggle="tab">Formula 3</a>
           </li>
           <li class="nav-item">
               <a href="#WS" class="nav-link" data-toggle="tab">W Series</a>
           </li>
       </ul>
       <hr/>
       <br/>
       <div class="tab-content">
 <!--- ACADEMY TAB ----------->
          <div class="tab-pane fade show active" id="academy">
               <!------------------ TEAM DIVS ------------------------>
               <div class="container-fluid">

                 <div class="row"> <!-- Team boxes -->

                   <!--- Formula 1 --->
                   <div class=" col-xl-3 col-sm-6 teamdiv" >
                      <h4 class = "formula">Formula 1</h4>
                      <table class = "academy_tab" width="100%">
                         <tr>
                            <td>
                              <img class = "image-fluid rounded-circle" src="{% if user.team.p1_1.id %} {{ user.team.p1_1.mugshot.url}} {% else %} /static/academy/webPageImages/blankUser.jpg {% endif %}" />
                           </td>
                           <td>
                              <p class = "name" >{{ user.team.p1_1}}</p>
                              <p class = "title" >Lead Driver</p>
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <img class = "image-fluid rounded-circle" src="{% if user.team.p1_2.id %} {{ user.team.p1_2.mugshot.url}} {% else %} /static/academy/webPageImages/blankUser.jpg {% endif %}" />
                           </td>
                           <td>
                              <p class = "name" >{{ user.team.p1_2}}</p>
                              <p class = "title" >Second Driver</p>
                           </td>
                        </tr>
                     </table>

                     <p class="pt-5 pl-4 pr-4">F1 Points : {{ teamdata.points_f1 |floatformat:0 }}</p>
                     <a href="/season/teamview?tab=F1" class="btn btn-primary mr-1 mt-3" role="button" >Edit</a>
                     <!----- end results Table ----------->
                     <br/>
                   </div>


                   <!--- Formula 2 --->
                   <div class="col-xl-3 col-sm-6 teamdiv" >
                      <h4 class = "formula">Formula 2</h4>
                      <table class = "academy_tab">
                         <tr>
                            <td>
                              <img class = "image-fluid rounded-circle" src="{{ user.team.p2_1.mugshot.url}}" />
                           </td>
                           <td>
                              <p class = "name" >{{ user.team.p2_1}}</p>
                              <p class = "title" >Lead Driver</p>
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <img class = "image-fluid rounded-circle" src="{% if user.team.p2_2.id %} {{ user.team.p2_2.mugshot.url}} {% else %} /static/academy/webPageImages/blankUser.jpg {% endif %}" />
                           </td>
                           <td>
                              <p class = "name" >{{ user.team.p2_2}}</p>
                              <p class = "title" >Second Driver</p>
                           </td>
                        </tr>
                     </table>
                     <!----- results Table ----------->
                     <p class="pt-5 pl-4 pr-4">F2 Points : {{ teamdata.points_f2 |floatformat:0 }}</p>

                     <a href="/season/teamview?tab=F2" class="btn btn-primary mr-1 mt-3" role="button" >Edit</a>
                     <!----- end results Table ----------->
                     <br/>
                   </div>

                   <!--- Formula 3 --->
                   <div class="col-xl-3 col-sm-6 teamdiv" >
                      <h4 class = "formula">Formula 3</h4>
                      <table class = "academy_tab">
                         <tr>
                            <td>
                              <img class = "image-fluid rounded-circle" src="{% if user.team.p3_1.id %} {{ user.team.p3_1.mugshot.url}} {% else %} /static/academy/webPageImages/blankUser.jpg {% endif %}" />
                           </td>
                           <td>
                              <p class = "name" >{{ user.team.p3_1}}</p>
                              <p class = "title" >Lead Driver</p>
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <img class = "image-fluid rounded-circle" src="{% if user.team.p3_2.id %} {{ user.team.p3_2.mugshot.url}} {% else %} /static/academy/webPageImages/blankUser.jpg {% endif %}" />
                           </td>
                           <td>
                              <p class = "name" >{{ user.team.p3_2}}</p>
                              <p class = "title" >Second Driver</p>
                           </td>
                        </tr>
                     </table>
                     <!----- results Table ----------->
                     <p class="pt-5 pl-4 pr-4">F3 Points : {{ teamdata.points_f3 |floatformat:0 }}</p>

                     <a href="/season/teamview?tab=F3" class="btn btn-primary mr-1 mt-3" role="button" >Edit</a>
                     <!----- end results Table ----------->
                     <br/>
                   </div>

                   <!--- W Series--->
                   <div class="col-xl-3 col-sm-6 teamdiv">
                      <h4 class = "formula">W Series</h4>
                      <table class = "academy_tab">
                         <tr>
                            <td>
                              <img class = "image-fluid rounded-circle" src="{% if user.team.pw_1.id %} {{ user.team.pw_1.mugshot.url}} {% else %} /static/academy/webPageImages/blankUser.jpg {% endif %}" />
                           </td>
                           <td>
                              <p class = "name" >{{ user.team.pw_1}}</p>
                              <p class = "title" >Lead Driver</p>
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <img class = "image-fluid rounded-circle" src="{% if user.team.pw_2.id %} {{ user.team.pw_2.mugshot.url}} {% else %} /static/academy/webPageImages/blankUser.jpg {% endif %}" />
                           </td>
                           <td>
                              <p class = "name" >{{ user.team.pw_2}}</p>
                              <p class = "title" >Second Driver</p>
                           </td>
                        </tr>
                     </table>
                     <!----- results Table ----------->
                     <p class="pt-5 pl-4 pr-4">W Series Points : {{ teamdata.points_ws |floatformat:0 }}</p>

                     <a href="/season/teamview?tab=WS" class="btn btn-primary mr-1 mt-3" role="button" >Edit</a>
                     <!----- end results Table ----------->
                     <br/>
                   </div>

                 </div><!-- Team boxes -->
                 <div class = "row"> <!--- Spend charts -->
                          <div class="col-md-3">
                              <div class="card"  id="tour3">
                                  <div class="card-body">
                                      <div class="row">
                                          <div class="col-4 align-self-center">
                                              <div class="icon-info">

                                                  <img src="{% static 'season/siteimages/F1.png' %}" class="f_badges" >
                                              </div>
                                          </div>
                                          <div class="col-8 align-self-center text-center">
                                              <div class="ml-2 text-right">
                                                  <p class="mb-1 font-size-13">F1 Cash Balance</p>
                                                  <h4 class="mt-0 mb-1 font-20">${{teamdata.f1_cashpot}}m ({{graphdata.0|floatformat:1}}%)</h4>
                                              </div>
                                          </div>
                                      </div>
                                      <div class="progress mt-2" style="height:3px;">
                                          <div class="progress-bar progress-animated  bg-warning" role="progressbar" style="max-width: {{graphdata.0}}%;" aria-valuenow="55" aria-valuemin="0" aria-valuemax="100"></div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <div class="col-md-3">
                              <div class="card">
                                  <div class="card-body">
                                      <div class="row">
                                          <div class="col-4 align-self-center">
                                              <div class="icon-info">

                                                  <img src="{% static 'season/siteimages/F2.png' %}" class="f_badges" >
                                              </div>
                                          </div>
                                          <div class="col-8 align-self-center text-center">
                                              <div class="ml-2 text-right">
                                                  <p class="mb-1 font-size-13">F2 Cash Balance</p>
                                                  <h4 class="mt-0 mb-1 font-20">${{teamdata.f2_cashpot}}m ({{graphdata.1|floatformat:1}}%)</h4>
                                              </div>
                                          </div>
                                      </div>
                                      <div class="progress mt-2" style="height:3px;">
                                          <div class="progress-bar progress-animated  bg-purple" role="progressbar" style="max-width: {{graphdata.1}}%;" aria-valuenow="55" aria-valuemin="0" aria-valuemax="100"></div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <div class="col-md-3">
                              <div class="card">
                                  <div class="card-body">
                                      <div class="row">
                                          <div class="col-4 align-self-center">
                                              <div class="icon-info">

                                                  <img src="{% static 'season/siteimages/F3.png' %}" class="f_badges" >
                                              </div>
                                          </div>
                                          <div class="col-8 align-self-center text-center">
                                              <div class="ml-2 text-right">
                                                  <p class="mb-1 font-size-13">F3 Cash Balance</p>
                                                  <!--<span class="badge badge-soft-warning mt-1 shadow-none">OVER!!</span>-->
                                                  <h4 class="mt-0 mb-1 font-20">${{teamdata.f3_cashpot}}m ({{graphdata.2|floatformat:1}}%)</h4>

                                              </div>
                                          </div>
                                      </div>
                                      <div class="progress mt-2" style="height:3px;">
                                          <div class="progress-bar progress-animated  bg-success" role="progressbar" style="max-width: {{graphdata.2}}%;" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100"></div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <div class="col-md-3">
                              <div class="card">
                                  <div class="card-body">
                                      <div class="row">
                                          <div class="col-sm-4 col-4 align-self-center">
                                              <div class="icon-info">

                                                  <img src="{% static 'season/siteimages/W.png' %}" class="f_badges" >
                                              </div>
                                          </div>
                                          <div class="col-sm-8 col-8 align-self-center text-center">
                                              <div class="ml-2 text-right">
                                                  <p class="mb-1 font-size-13">WS Cash Balance</p>
                                                  <h4 class="mt-0 mb-1 font-20">${{teamdata.ws_cashpot}}m ({{graphdata.3|floatformat:1}}%)</h4>
                                              </div>
                                          </div>
                                      </div>
                                      <div class="progress mt-2" style="height:3px;">
                                          <div class="progress-bar progress-animated  bg-pink" role="progressbar" style="max-width: {{graphdata.3}}%;" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100"></div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                 </div> <!--- Spend charts -->
               </div>
<!------------------ TEAM DIVS ------------------------>
            </div>

            <!------------------ F1 Edit DIV ------------------------>
            <div class="tab-pane fade" id="F1">
               <div style = "padding: 0% 5% 10% 5%;">
                  <h2>F1 Team</h2>
                  <dl class="row justify-content-center">

                     <dt class=" DriverSection col-lg-1 col-md-0"></dt>

                     <dt class=" DriverSection col-lg-3 col-md-6 col-sm-12"><center>
                        <img class = "image-fluid rounded-circle" src="{{ teamdata.p1_1.mugshot.url}}" style="height:150px;"/>
                        <h3 class="mt-2">{{ teamdata.p1_1}}</h3>
                        <p>Lead Driver</p>
                        <p><b>${{ teamdata.p1_1.value}}m </b>(Paid:${{ teamdata.p1_1_cost}}m) </p></center>
                     </dt>

                     <dt class=" DriverSection col-lg-3 col-md-6 col-sm-12"><center>
                        <img class = "image-fluid rounded-circle" src="{{ teamdata.p1_2.mugshot.url}}" style="height:150px;"/>
                        <h3 class="mt-2">{{ teamdata.p1_2}}</h3>
                        <p>Second Driver</p>
                        <p><b>${{ teamdata.p1_2.value}}m </b>(Paid:${{ teamdata.p1_2_cost}}m) </p></center>
                     </dt>

                     <dt class=" DriverSection col-lg-4 col-md-6 col-sm-12"><center>
                        <table class="budget-table" style="margin-top:100px;">
                           <tr><th><h3 id = "f1_budget_title">Current F1 Cash:</h3></th><th></th>
                           <tr><td id="f1_p1_name" >{{ teamdata.p1_1}}    </td><td id="f1_p1_cost"        >$</td></tr>
                           <tr><td id="f1_p2_name" >{{ teamdata.p1_2}}    </td><td id="f1_p2_cost"        >$</td></tr>
                           <tr><td>Total Cost                             </td><td id="f1_total_cost"     >$</td></tr>
                           <tr><td>Budget remaining                       </td><td id="f1_total_cash_left">$</td></tr>
                        </table></center>
                        <p>
                     </dt>

                  </dl>
                  <!-- Edit Table ----->
                  <br />
                  <form action="{% url 'teamview' %}?tab=F1" method="POST" id="F1_form">
                     {% csrf_token %}
                     <p style="text-align:right;padding-right:20%;"><input type="submit" name="F1_submit" value="UPDATE DRIVERS"  form="F1_form"></p>
                     <br />
                     <div class="table-wrapper-scroll-y my-custom-scrollbar radio-selector">
                        <div class="container-fluid">
                           <div class="row justify-content-center">
                              <div class="col-lg-10">
                                 <table class="pickertable table-responsive-md">
                                    <thead>
                                       <tr><th colspan = "2" class = "pl-5">Driver</th><th style="text-align:center;">Cost</th><th style="text-align:center;">Points</th>
                                        <th style="text-align:center;">Driver #1</th><th style="text-align:center;">Driver #2 </th></tr>
                                    </thead>
                                    <tbody>

                                       {% for driver in f1drivers.all %}
                                       <tr>
                                          <td><img src="{{driver.mugshot.url}}" class = "image-fluid rounded-circle-xs"></td>
                                          <td style="text-align:left;">{{driver.firstname}} {{driver.surname}}
                                          </td><td style="padding-left:5px;">
                                             ${{driver.value}}m
                                          </td><td style="padding-left:10px;">
                                             {{driver.points_total | floatformat:0 }}
                                          </td>
                                          <td>
                                             <input type="radio" id="p1_1_picker" name="p1_1_picker" value="{{driver.id}}|{{driver.firstname}} {{driver.surname}}|{{driver.value}}" {% if teamdata.p1_1.id == driver.id %} checked {% endif %}>
                                          </td>
                                          <td>
                                             <input type="radio" id="p1_2_picker" name="p1_2_picker" value="{{driver.id}}|{{driver.firstname}} {{driver.surname}}|{{driver.value}}" {% if teamdata.p1_2.id == driver.id %} checked {% endif %}>
                                          </td>
                                       </tr>
                                    {% endfor%}

                                    </tbody>
                                 </table>
                              </div>
                           </div>
                        </div>
                     </div>
                     <p style="text-align:right;padding-right:20%;"><br /><br />
                        <input type="submit" name="F1_submit" value="UPDATE DRIVERS"  form="F1_form">
                     </p>
                  </form>
               </div>
            </div>

            <!------------------ F2 Edit DIV ------------------------>
            <div class="tab-pane fade" id="F2">
               <div style = "padding: 0% 5% 10% 5%;">
                  <h2>F2 Team</h2>
                  <dl class="row justify-content-center">

                     <dt class=" DriverSection col-lg-1 col-md-0"></dt>

                     <dt class=" DriverSection col-lg-3 col-md-6 col-sm-12"><center>
                        <img class = "image-fluid rounded-circle" src="{{ teamdata.p2_1.mugshot.url}}" style="height:150px;"/>
                        <h3 class="mt-2">{{ teamdata.p2_1}}</h3>
                        <p>Lead Driver</p>
                        <p><b>${{ teamdata.p2_1.value}}m </b>(Paid:${{ teamdata.p2_1_cost}}m) </p></center>
                     </dt>

                     <dt class=" DriverSection col-lg-3 col-md-6 col-sm-12"><center>
                        <img class = "image-fluid rounded-circle" src="{{ teamdata.p2_2.mugshot.url}}" style="height:150px;"/>
                        <h3 class="mt-2">{{ teamdata.p2_2}}</h3>
                        <p>Second Driver</p>
                        <p><b>${{ teamdata.p2_2.value}}m </b>(Paid:${{ teamdata.p2_2_cost}}m) </p></center>
                     </dt>

                     <dt class=" DriverSection col-lg-4 col-md-6 col-md-12 col-md-12"><center>
                        <table class="budget-table" style="margin-top:100px;">
                           <tr><th><h3 id = "f2_budget_title">Current F2 Cash:</h3></th><th></th>
                           <tr><td id="f2_p1_name" >{{ teamdata.p2_1}}    </td><td id="f2_p1_cost"        >$</td></tr>
                           <tr><td id="f2_p2_name" >{{ teamdata.p2_2}}    </td><td id="f2_p2_cost"        >$</td></tr>
                           <tr><td>Total Cost                             </td><td id="f2_total_cost"     >$</td></tr>
                           <tr><td>Budget remaining                       </td><td id="f2_total_cash_left">$</td></tr>
                        </table></center>
                        <p>
                     </dt>

                  </dl>
                  <!-- Edit Table ----->
                  <br />
                  <form action="{% url 'teamview' %}?tab=F2" method="POST" id="F2_form">
                     {% csrf_token %}
                     <p style="text-align:right;padding-right:20%;"><input type="submit" name="F2_submit" value="UPDATE F2 DRIVERS"  form="F2_form"></p>
                     <br />
                     <div class="table-wrapper-scroll-y my-custom-scrollbar radio-selector">
                        <div class="container-fluid">
                           <div class="row justify-content-center">
                              <!--- Formula 2 --->
                              <div class="col-sm-8">
                                 <table class="pickertable table-responsive-md">
                                    <thead>
                                          <tr><th colspan = "2" class = "pl-5">Driver</th><th style="text-align:center;">Cost</th><th style="text-align:center;">Points</th>
                                           <th style="text-align:center;">Driver #1</th><th style="text-align:center;">Driver #2 </th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       {% for driver in f2drivers.all %}
                                       <tr>
                                          <td><img src="{{driver.mugshot.url}}" class = "image-fluid rounded-circle-xs"></td>
                                          <td style="text-align:left;">{{driver.firstname}} {{driver.surname}}
                                          </td><td style="padding-left:5px;">
                                             ${{driver.value}}m
                                          </td><td style="padding-left:10px;">
                                             {{driver.points_total | floatformat:0 }}
                                          </td>
                                          <td>
                                             <input type="radio" id="p2_1_picker" name="p2_1_picker" value="{{driver.id}}|{{driver.firstname}} {{driver.surname}}|{{driver.value}}" {% if teamdata.p2_1.id == driver.id %} checked {% endif %}>
                                          </td>
                                          <td>
                                             <input type="radio" id="p2_2_picker" name="p2_2_picker" value="{{driver.id}}|{{driver.firstname}} {{driver.surname}}|{{driver.value}}" {% if teamdata.p2_2.id == driver.id %} checked {% endif %}>
                                          </td>
                                       </tr>
                                    {% endfor%}
                                    </tbody>
                                 </table>
                              </div>
                           </div>
                        </div>
                     </div>
                     <p style="text-align:right;padding-right:20%;"><br /><br />
                        <input type="submit" name="F2_submit" value="UPDATE F2 DRIVERS"  form="F2_form">
                     </p>
                  </form>
               </div>
            </div>

            <!------------------ F3 Edit DIV ------------------------>
            <div class="tab-pane fade" id="F3">
               <div style = "padding: 0% 5% 10% 5%;">
                  <h2>F3 Team</h2>
                  <dl class="row justify-content-center">

                     <dt class=" DriverSection col-lg-1 col-md-0"></dt>

                     <dt class=" DriverSection col-lg-3 col-md-6 col-sm-12"><center>
                        <img class = "image-fluid rounded-circle" src="{{ teamdata.p3_1.mugshot.url}}" style="height:150px;"/>
                        <h3 class="mt-2">{{ teamdata.p3_1}}</h3>
                        <p>Lead Driver</p>
                        <p><b>${{ teamdata.p3_1.value}}m </b>(Paid:${{ teamdata.p3_1_cost}}m) </p></center>
                     </dt>

                     <dt class=" DriverSection col-lg-3 col-md-6 col-sm-12"><center>
                        <img class = "image-fluid rounded-circle" src="{{ teamdata.p3_2.mugshot.url}}" style="height:150px;"/>
                        <h3 class="mt-2">{{ teamdata.p3_2}}</h3>
                        <p>Second Driver</p>
                        <p><b>${{ teamdata.p3_2.value}}m </b>(Paid:${{ teamdata.p3_2_cost}}m) </p></center>
                     </dt>

                     <dt class=" DriverSection col-lg-4 col-md-6 col-md-12"><center>
                        <table class="budget-table" style="margin-top:100px;">
                           <tr><th><h3 id = "f3_budget_title">Current F3 Cash:</h3></th><th></th>
                           <tr><td id="f3_p1_name" >{{ teamdata.p3_1}}    </td><td id="f3_p1_cost"        >$</td></tr>
                           <tr><td id="f3_p2_name" >{{ teamdata.p3_2}}    </td><td id="f3_p2_cost"        >$</td></tr>
                           <tr><td>Total Cost                             </td><td id="f3_total_cost"     >$</td></tr>
                           <tr><td>Budget remaining                       </td><td id="f3_total_cash_left">$</td></tr>
                        </table></center>
                        <p>
                     </dt>

                  </dl>
                  <!-- Edit Table ----->
                  <br />
                  <form action="{% url 'teamview' %}?tab=F3" method="POST" id="F3_form">
                     {% csrf_token %}
                     <p style="text-align:right;padding-right:20%;"><input type="submit" name="F3_submit" value="UPDATE F3 DRIVERS"  form="F3_form"></p>
                     <br />
                     <div class="table-wrapper-scroll-y my-custom-scrollbar radio-selector">
                        <div class="container-fluid">
                           <div class="row justify-content-center">
                              <div class="col-sm-8">
                                 <table class="pickertable table-responsive-md">
                                    <thead>
                                       <tr><th colspan = "2" class = "pl-5">Driver</th><th style="text-align:center;">Cost</th><th style="text-align:center;">Points</th>
                                        <th style="text-align:center;">Driver #1</th><th style="text-align:center;">Driver #2 </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                       {% for driver in f3drivers.all %}
                                       <tr>
                                          <td><img src="{{driver.mugshot.url}}" class = "image-fluid rounded-circle-xs"></td>
                                          <td style="text-align:left;">{{driver.firstname}} {{driver.surname}}
                                          </td><td style="padding-left:5px;">
                                             ${{driver.value}}m
                                          </td><td style="padding-left:10px;">
                                             {{driver.points_total | floatformat:0 }}
                                          </td>
                                          <td>
                                             <input type="radio" id="p3_1_picker" name="p3_1_picker" value="{{driver.id}}|{{driver.firstname}} {{driver.surname}}|{{driver.value}}" {% if teamdata.p3_1.id == driver.id %} checked {% endif %}>
                                          </td>
                                          <td>
                                             <input type="radio" id="p3_2_picker" name="p3_2_picker" value="{{driver.id}}|{{driver.firstname}} {{driver.surname}}|{{driver.value}}" {% if teamdata.p3_2.id == driver.id %} checked {% endif %}>
                                          </td>
                                       </tr>
                                    {% endfor%}
                                    </tbody>
                                 </table>
                              </div>
                           </div>
                        </div>
                     </div>
                     <p style="text-align:right;padding-right:20%;"><br /><br />
                        <input type="submit" name="F3_submit" value="UPDATE F3 DRIVERS"  form="F3_form">
                     </p>
                  </form>
               </div>
            </div>

            <!------------------ WS Edit DIV ------------------------>
            <div class="tab-pane fade" id="WS">
               <div style = "padding: 0% 5% 10% 5%;">
                  <h2>W Series Team</h2>
                  <dl class="row justify-content-center">

                     <dt class=" DriverSection col-lg-1 col-md-0"></dt>

                     <dt class=" DriverSection col-lg-3 col-md-6 col-sm-12"><center>
                        <img class = "image-fluid rounded-circle" src="{{ teamdata.pw_1.mugshot.url}}" style="height:150px;"/>
                        <h3 class="mt-2">{{ teamdata.pw_1}}</h3>
                        <p>Lead Driver</p>
                        <p><b>${{ teamdata.pw_1.value}}m </b>(Paid:${{ teamdata.pw_1_cost}}m) </p></center>
                     </dt>

                     <dt class=" DriverSection col-lg-3 col-md-6 col-sm-12"><center>
                        <img class = "image-fluid rounded-circle" src="{{ teamdata.pw_2.mugshot.url}}" style="height:150px;"/>
                        <h3 class="mt-2">{{ teamdata.pw_2}}</h3>
                        <p>Second Driver</p>
                        <p><b>${{ teamdata.pw_2.value}}m </b>(Paid:${{ teamdata.pw_2_cost}}m) </p></center>
                     </dt>

                     <dt class=" DriverSection col-lg-4 col-md-6 col-md-12"><center>
                        <table class="budget-table" style="margin-top:100px;">
                           <tr><th><h3 id = "ws_budget_title">Current W Series Cash:</h3></th><th></th>
                           <tr><td id="ws_p1_name" >{{ teamdata.pw_1}}    </td><td id="ws_p1_cost"        >$</td></tr>
                           <tr><td id="ws_p2_name" >{{ teamdata.pw_2}}    </td><td id="ws_p2_cost"        >$</td></tr>
                           <tr><td>Total Cost                             </td><td id="ws_total_cost"     >$</td></tr>
                           <tr><td>Budget remaining                       </td><td id="ws_total_cash_left">$</td></tr>
                        </table></center>
                        <p>
                     </dt>

                  </dl>
                  <!-- Edit Table ----->
                  <br />
                  <form action="{% url 'teamview' %}?tab=WS" method="POST" id="WS_form">
                     {% csrf_token %}
                     <p style="text-align:right;padding-right:20%;"><input type="submit" name="WS_submit" value="UPDATE WS DRIVERS"  form="WS_form"></p>
                     <br />
                     <div class="table-wrapper-scroll-y my-custom-scrollbar radio-selector">
                        <div class="container-fluid">
                           <div class="row justify-content-center">
                              <div class="col-sm-8">
                                 <table class="pickertable table-responsive-md">
                                    <thead>
                                       <tr><th colspan = "2" class = "pl-5">Driver</th><th style="text-align:center;">Cost</th><th style="text-align:center;">Points</th>
                                        <th style="text-align:center;">Driver #1</th><th style="text-align:center;">Driver #2 </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                       {% for driver in wsdrivers.all %}
                                       <tr>
                                          <td><img src="{{driver.mugshot.url}}" class = "image-fluid rounded-circle-xs"></td>
                                          <td style="text-align:left;">{{driver.firstname}} {{driver.surname}}
                                          </td><td style="padding-left:5px;">
                                             ${{driver.value}}m
                                          </td><td style="padding-left:10px;">
                                             {{driver.points_total | floatformat:0 }}
                                          </td>
                                          <td>
                                             <input type="radio" id="pw_1_picker" name="pw_1_picker" value="{{driver.id}}|{{driver.firstname}} {{driver.surname}}|{{driver.value}}" {% if teamdata.pw_1.id == driver.id %} checked {% endif %}>
                                          </td>
                                          <td>
                                             <input type="radio" id="pw_2_picker" name="pw_2_picker" value="{{driver.id}}|{{driver.firstname}} {{driver.surname}}|{{driver.value}}" {% if teamdata.pw_2.id == driver.id %} checked {% endif %}>
                                          </td>
                                       </tr>
                                    {% endfor%}
                                    </tbody>
                                 </table>
                              </div>
                           </div>
                        </div>
                     </div>
                     <p style="text-align:right;padding-right:20%;"><br /><br />
                        <input type="submit" name="WS_submit" value="UPDATE WS DRIVERS"  form="WS_form">
                     </p>
                  </form>
               </div>
            </div>

<!------------------ End WS Edit DIV ------------------------>
         </div>
    </div>
   <br /><br />
</div>

<!-- sample modal content -->
<div id="myModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog">
   <div class="modal-content">
        <div class="modal-header">
           <h5 class="modal-title align-self-center mt-0" id="myModalLabel">Choose your Team Name</h5>
        </div>
        <div class="modal-body">

           <p>The first thing you have to do is make the big decision - What will we call the team? </p>
           <p> Think about it carefully as you will not be able to change it after the season begins
             (or you score your first points). Click on the button below to select a team name and image</p>
        </div>
        <div class="modal-footer">
           <a href = "{% url 'teamnamepicker'%}"><button type="button" class="btn btn-primary ">Choose My Team name</button></a>
        </div>
   </div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

{% endblock %}

<!---------------------- FOOTER BLOCK  ------------------->
{% block footer %}
{% endblock %}
<!---------------------- FOOTER BLOCK  ------------------->

<!---------------------- JAVASCRIPT BLOCK  ------------------->
{% block javascript %}

      //Pick up GET parameters
      //example.com?param1=name&param2=&id=6
      //$.urlParam('param1'); // name
      $.urlParam = function(name){
          var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
          if (results==null) {
             return null;
          }
          return decodeURI(results[1]) || 0;
       }

       $(document).ready(function(){
          //Collapse LHS menu bar to show team boxes
          if($(window).width() > 992) {
             $("#vertical-menu-btn").click();
         }

          //show modal if no team name selected
          if('{{teamdata.teamName}}' == 'My Team') {
          	 $('#myModal').modal('show');
          }

         // go to correct team tab
         $('.nav-pills a[href="#' + $.urlParam('tab') + '"]').tab('show');
         // gives us... $('.nav-pills a[href="#F1"]').tab('show');
         // USAGE:  URL/season/teamview?tab=F2

         //////////////////////////////////////////////
         // F1 - Set up RHS table numbers with current values
         totalcost = parseFloat({{teamdata.p1_1.value}})+parseFloat({{teamdata.p1_2.value}});
         cashbalance = parseFloat({{teamdata.f1_cashpot}});
         totalcost = totalcost.toFixed(1);
         cashbalance = cashbalance.toFixed(1);
         //Fill in Page values
         $("#f1_p1_cost").text("$"+{{teamdata.p1_1.value}}+"m");
         $("#f1_p2_cost").text("$"+{{teamdata.p1_2.value}}+"m");
         $("#f1_total_cost").text("$"+totalcost+"m");
         $("#f1_total_cash_left").text("$"+cashbalance+"m");
         $('input[name="F1_submit"]').attr('disabled','disabled');

         //////////////////////////////////////////////
         // F2 - Set up RHS table numbers with current values
         totalcost = parseFloat({{teamdata.p2_1.value}})+parseFloat({{teamdata.p2_2.value}});
         cashbalance = parseFloat({{teamdata.f2_cashpot}});
         totalcost = totalcost.toFixed(1);
         cashbalance = cashbalance.toFixed(1);
         //Fill in Page values
         $("#f2_p1_cost").text("$"+{{teamdata.p2_1.value}}+"m");
         $("#f2_p2_cost").text("$"+{{teamdata.p2_2.value}}+"m");
         $("#f2_total_cost").text("$"+totalcost+"m");
         $("#f2_total_cash_left").text("$"+cashbalance+"m");
         $('input[name="F2_submit"]').attr('disabled','disabled');

         //////////////////////////////////////////////
         // F3 - Set up RHS table numbers with current values
         totalcost = parseFloat({{teamdata.p3_1.value}})+parseFloat({{teamdata.p3_2.value}});
         cashbalance = parseFloat({{teamdata.f3_cashpot}});
         totalcost = totalcost.toFixed(1);
         cashbalance = cashbalance.toFixed(1);
         //Fill in Page values
         $("#f3_p1_cost").text("$"+{{teamdata.p3_1.value}}+"m");
         $("#f3_p2_cost").text("$"+{{teamdata.p3_2.value}}+"m");
         $("#f3_total_cost").text("$"+totalcost+"m");
         $("#f3_total_cash_left").text("$"+cashbalance+"m");
         $('input[name="F3_submit"]').attr('disabled','disabled');

         //////////////////////////////////////////////
         // WS - Set up RHS table numbers with current values
         totalcost = parseFloat({{teamdata.pw_1.value}})+parseFloat({{teamdata.pw_2.value}});
         cashbalance = parseFloat({{teamdata.ws_cashpot}});
         totalcost = totalcost.toFixed(1);
         cashbalance = cashbalance.toFixed(1);
         //Fill in Page values
         $("#ws_p1_cost").text("$"+{{teamdata.pw_1.value}}+"m");
         $("#ws_p2_cost").text("$"+{{teamdata.pw_2.value}}+"m");
         $("#ws_total_cost").text("$"+totalcost+"m");
         $("#ws_total_cash_left").text("$"+cashbalance+"m");
         $('input[name="WS_submit"]').attr('disabled','disabled');


///////////F1 Driver 1 selector change///////////////////////////
         var $radios1_1 = $('input[name="p1_1_picker"]');

         $radios1_1.change(function() {
            //Get Cash balance
            cashbalance = $("#f1_total_cash_left").text();
            cashbalance = parseFloat(cashbalance.substring(1, cashbalance.length-1));

            //Change Title First time
            $("#f1_budget_title").text("New Team Picks:");

            //add departing driver cost to cashbalance
            p1_1_dep_val = $("#f1_p1_cost").text();
            p1_1_dep_val = p1_1_dep_val.substring(1, p1_1_dep_val.length-1);           //Strip $ amd m
            cashbalance += parseFloat(p1_1_dep_val);                               //turn it back into a number

            //Pick up new radio button values and show
            var $checked = $radios1_1.filter(function() {
               return $(this).prop('checked');
            });
            var $f1_p1 = $checked.val().split('|');
            var p1_1_new_value = $f1_p1.pop();
            var p1_1_new_name = $f1_p1.pop();

            // Update RHS fields
            $("#f1_p1_cost").text('$'+p1_1_new_value+'m');
            $("#f1_p1_name").text(p1_1_new_name);

            //update teamTotalCost - first get OTHER driver cost
            p1_2_dep_val = $("#f1_p2_cost").text()
            p1_2_dep_val = p1_2_dep_val.substring(1, p1_2_dep_val.length-1);
            teamTotalCost = parseFloat(p1_1_new_value) + parseFloat(p1_2_dep_val);
            teamTotalCost = teamTotalCost.toFixed(1);
            $("#f1_total_cost").text('$' + teamTotalCost + 'm');

            //deduct new driver cost from cashbalance
            cashbalance -= parseFloat(p1_1_new_value);

            //round it.
            cashbalance = cashbalance.toFixed(1);
            $("#f1_total_cash_left").text('$'+cashbalance+'m');
            // Show Budget red if negative
            if(cashbalance < 0){$('#f1_total_cash_left').css('color', 'red');}else{$('#f1_total_cash_left').css('color', '#A3A4AB');}
            //Test values for both drivers present before enabling UPDATE button
            if (cashbalance < 0 || parseFloat(p1_1_new_value) < 1 || parseFloat(p1_2_dep_val) < 1 )
               {$('input[name="F1_submit"]').attr('disabled','disabled');}
            else
               {$('input[name="F1_submit"]').removeAttr('disabled');}
         });

///////////F1 Driver 2 selector change///////////////////////////
         var $radios1_2 = $('input[name="p1_2_picker"]');

         $radios1_2.change(function() {
            //Get Cash balance
            cashbalance = $("#f1_total_cash_left").text();
            cashbalance = parseFloat(cashbalance.substring(1, cashbalance.length-1));

            //Change Title First time
            $("#f1_budget_title").text("New Team Picks:");

            //add departing driver cost to cashbalance
            p1_2_dep_val = $("#f1_p2_cost").text();
            p1_2_dep_val = p1_2_dep_val.substring(1, p1_2_dep_val.length-1);            //Strip $ amd m
            cashbalance += parseFloat(p1_2_dep_val);                               //turn it back into a number

            //Pick up new radio button values and show
            var $checked = $radios1_2.filter(function() {
               return $(this).prop('checked');
            });
            var $f1_p2 = $checked.val().split('|');
            var p1_2_new_value = $f1_p2.pop();
            var p1_2_new_name = $f1_p2.pop();

            // Update RHS fields
            $("#f1_p2_cost").text('$'+p1_2_new_value+'m');
            $("#f1_p2_name").text(p1_2_new_name);

            //update teamTotalCost - first get OTHER driver cost
            p1_1_dep_val = $("#f1_p1_cost").text()
            p1_1_dep_val = p1_1_dep_val.substring(1, p1_1_dep_val.length-1);
            teamTotalCost = parseFloat(p1_2_new_value) + parseFloat(p1_1_dep_val);
            teamTotalCost = teamTotalCost.toFixed(1);
            $("#f1_total_cost").text('$' + teamTotalCost + 'm');

            //deduct new driver cost from cashbalance
            cashbalance -= parseFloat(p1_2_new_value);
            //round it.
            cashbalance = cashbalance.toFixed(1);
            //show new cash balance
            $("#f1_total_cash_left").text('$'+cashbalance+'m');
            // Show Budget red if negative
            if(cashbalance < 0){$('#f1_total_cash_left').css('color', 'red');}else{$('#f1_total_cash_left').css('color', '#A3A4AB');}
            //Test values for both drivers present before enabling UPDATE button
            if (cashbalance < 0 || parseFloat(p1_2_new_value) < 1 || parseFloat(p1_1_dep_val) < 1)
               {$('input[name="F1_submit"]').attr('disabled','disabled');}
            else
               {$('input[name="F1_submit"]').removeAttr('disabled');}
         });

///////////F2 Driver 1 selector change///////////////////////////
         var $radios2_1 = $('input[name="p2_1_picker"]');

         $radios2_1.change(function() {
            //Get Cash balance
            cashbalance = $("#f2_total_cash_left").text();
            cashbalance = parseFloat(cashbalance.substring(1, cashbalance.length-1));

            //Change Title First time
            $("#f2_budget_title").text("New Team Picks:");

            //add departing driver cost to cashbalance
            p2_1_dep_val = $("#f2_p1_cost").text();
            p2_1_dep_val = p2_1_dep_val.substring(1, p2_1_dep_val.length-1);       //Strip $ amd m
            cashbalance += parseFloat(p2_1_dep_val);                               //turn it back into a number

            //Pick up new radio button values and show
            var $checked = $radios2_1.filter(function() {
               return $(this).prop('checked');
            });
            var $f2_p1 = $checked.val().split('|');
            var p2_1_new_value = $f2_p1.pop();
            var p2_1_new_name = $f2_p1.pop();

            // Update RHS fields
            $("#f2_p1_cost").text('$'+p2_1_new_value+'m');
            $("#f2_p1_name").text(p2_1_new_name);

            //update teamTotalCost - first get OTHER driver cost
            p2_2_dep_val = $("#f2_p2_cost").text()
            p2_2_dep_val = p2_2_dep_val.substring(1, p2_2_dep_val.length-1);
            teamTotalCost = parseFloat(p2_1_new_value) + parseFloat(p2_2_dep_val);
            teamTotalCost = teamTotalCost.toFixed(1);
            $("#f2_total_cost").text('$' + teamTotalCost + 'm');

            //deduct new driver cost from cashbalance
            cashbalance -= parseFloat(p2_1_new_value);

            //round it.
            cashbalance = cashbalance.toFixed(1);
            $("#f2_total_cash_left").text('$'+cashbalance+'m');
            // Show Budget red if negative
            if(cashbalance < 0){$('#f2_total_cash_left').css('color', 'red');}else{$('#f2_total_cash_left').css('color', '#A3A4AB');}
            //Test values for both drivers present before enabling UPDATE button
            if (cashbalance < 0 || parseFloat(p2_1_new_value) < 1 || parseFloat(p2_2_dep_val) < 1)
               {$('input[name="F2_submit"]').attr('disabled','disabled');}
            else
               {$('input[name="F2_submit"]').removeAttr('disabled');}
         });

///////////F2 Driver 2 selector change///////////////////////////
         var $radios2_2 = $('input[name="p2_2_picker"]');

         $radios2_2.change(function() {
            //Get Cash balance
            cashbalance = $("#f2_total_cash_left").text();
            cashbalance = parseFloat(cashbalance.substring(1, cashbalance.length-1));

            //Change Title First time
            $("#f2_budget_title").text("New Team Picks:");

            //add departing driver cost to cashbalance
            p2_2_dep_val = $("#f2_p2_cost").text();
            p2_2_dep_val = p2_2_dep_val.substring(1, p2_2_dep_val.length-1);            //Strip $ amd m
            cashbalance += parseFloat(p2_2_dep_val);                               //turn it back into a number

            //Pick up new radio button values and show
            var $checked = $radios2_2.filter(function() {
               return $(this).prop('checked');
            });
            var $f2_p2 = $checked.val().split('|');
            var p2_2_new_value = $f2_p2.pop();
            var p2_2_new_name  = $f2_p2.pop();

            // Update RHS fields
            $("#f2_p2_cost").text('$'+p2_2_new_value+'m');
            $("#f2_p2_name").text(p2_2_new_name);

            //update teamTotalCost - first get OTHER driver cost
            p2_1_dep_val = $("#f2_p1_cost").text()
            p2_1_dep_val = p2_1_dep_val.substring(1, p2_1_dep_val.length-1);
            teamTotalCost = parseFloat(p2_2_new_value) + parseFloat(p2_1_dep_val);
            teamTotalCost = teamTotalCost.toFixed(1);
            $("#f2_total_cost").text('$' + teamTotalCost + 'm');

            //deduct new driver cost from cashbalance
            cashbalance -= parseFloat(p2_2_new_value);
            //round it.
            cashbalance = cashbalance.toFixed(1);
            //show new cash balance
            $("#f2_total_cash_left").text('$'+cashbalance+'m');
            // Show Budget red if negative
            if(cashbalance < 0){$('#f2_total_cash_left').css('color', 'red');}else{$('#f2_total_cash_left').css('color', '#A3A4AB');}
            //Test values for both drivers present before enabling UPDATE button
            if (cashbalance < 0 || parseFloat(p2_2_new_value) < 1 || parseFloat(p2_1_dep_val) < 1)
               {$('input[name="F2_submit"]').attr('disabled','disabled');}
            else
               {$('input[name="F2_submit"]').removeAttr('disabled');}
         });

/////////// END F2 Driver 2 selector change///////////////////////////
/////////// F3 Driver 1 selector change///////////////////////////
         var $radios3_1 = $('input[name="p3_1_picker"]');

         $radios3_1.change(function() {
            //Get Cash balance
            cashbalance = $("#f3_total_cash_left").text();
            cashbalance = parseFloat(cashbalance.substring(1, cashbalance.length-1));

            //Change Title First time
            $("#f3_budget_title").text("New Team Picks:");

            //add departing driver cost to cashbalance
            p3_1_dep_val = $("#f3_p1_cost").text();
            p3_1_dep_val = p3_1_dep_val.substring(1, p3_1_dep_val.length-1);       //Strip $ amd m
            cashbalance += parseFloat(p3_1_dep_val);                               //turn it back into a number

            //Pick up new radio button values and show
            var $checked = $radios3_1.filter(function() {
               return $(this).prop('checked');
            });
            var $f3_p1 = $checked.val().split('|');
            var p3_1_new_value = $f3_p1.pop();
            var p3_1_new_name = $f3_p1.pop();

            // Update RHS fields
            $("#f3_p1_cost").text('$'+p3_1_new_value+'m');
            $("#f3_p1_name").text(p3_1_new_name);

            //update teamTotalCost - first get OTHER driver cost
            p3_2_dep_val = $("#f3_p2_cost").text()
            p3_2_dep_val = p3_2_dep_val.substring(1, p3_2_dep_val.length-1);
            teamTotalCost = parseFloat(p3_1_new_value) + parseFloat(p3_2_dep_val);
            teamTotalCost = teamTotalCost.toFixed(1);
            $("#f3_total_cost").text('$' + teamTotalCost + 'm');

            //deduct new driver cost from cashbalance
            cashbalance -= parseFloat(p3_1_new_value);

            //round it.
            cashbalance = cashbalance.toFixed(1);
            $("#f3_total_cash_left").text('$'+cashbalance+'m');
            // Show Budget red if negative
            if(cashbalance < 0){$('#f3_total_cash_left').css('color', 'red');}else{$('#f3_total_cash_left').css('color', '#A3A4AB');}
            //Test values for both drivers present before enabling UPDATE button
            if (cashbalance < 0 || parseFloat(p3_1_new_value) < 1 || parseFloat(p3_2_dep_val) < 1)
               {$('input[name="F3_submit"]').attr('disabled','disabled');}
            else
               {$('input[name="F3_submit"]').removeAttr('disabled');}
         });

///////////F3 Driver 2 selector change///////////////////////////
         var $radios3_2 = $('input[name="p3_2_picker"]');

         $radios3_2.change(function() {
            //Get Cash balance
            cashbalance = $("#f3_total_cash_left").text();
            cashbalance = parseFloat(cashbalance.substring(1, cashbalance.length-1));

            //Change Title First time
            $("#f3_budget_title").text("New Team Picks:");

            //add departing driver cost to cashbalance
            p3_2_dep_val = $("#f3_p2_cost").text();
            p3_2_dep_val = p3_2_dep_val.substring(1, p3_2_dep_val.length-1);            //Strip $ amd m
            cashbalance += parseFloat(p3_2_dep_val);                               //turn it back into a number

            //Pick up new radio button values and show
            var $checked = $radios3_2.filter(function() {
               return $(this).prop('checked');
            });
            var $f3_p2 = $checked.val().split('|');
            var p3_2_new_value = $f3_p2.pop();
            var p3_2_new_name  = $f3_p2.pop();

            // Update RHS fields
            $("#f3_p2_cost").text('$'+p3_2_new_value+'m');
            $("#f3_p2_name").text(p3_2_new_name);

            //update teamTotalCost - first get OTHER driver cost
            p3_1_dep_val = $("#f3_p1_cost").text()
            p3_1_dep_val = p3_1_dep_val.substring(1, p3_1_dep_val.length-1);
            teamTotalCost = parseFloat(p3_2_new_value) + parseFloat(p3_1_dep_val);
            teamTotalCost = teamTotalCost.toFixed(1);
            $("#f3_total_cost").text('$' + teamTotalCost + 'm');

            //deduct new driver cost from cashbalance
            cashbalance -= parseFloat(p3_2_new_value);
            //round it.
            cashbalance = cashbalance.toFixed(1);
            //show new cash balance
            $("#f3_total_cash_left").text('$'+cashbalance+'m');
            // Show Budget red if negative
            if(cashbalance < 0){$('#f3_total_cash_left').css('color', 'red');}else{$('#f3_total_cash_left').css('color', '#A3A4AB');}
            //Test values for both drivers present before enabling UPDATE button
            if (cashbalance < 0 || parseFloat(p3_2_new_value) < 1 || parseFloat(p3_1_dep_val) < 1)
               {$('input[name="F3_submit"]').attr('disabled','disabled');}
            else
               {$('input[name="F3_submit"]').removeAttr('disabled');}
         });

/////////// END F3 Driver 2 selector change///////////////////////////
/////////// WS Driver 1 selector change///////////////////////////////
         var $radiosw_1 = $('input[name="pw_1_picker"]');

         $radiosw_1.change(function() {
            //Get Cash balance
            cashbalance = $("#ws_total_cash_left").text();
            cashbalance = parseFloat(cashbalance.substring(1, cashbalance.length-1));

            //Change Title First time
            $("#ws_budget_title").text("New Team Picks:");

            //add departing driver cost to cashbalance
            pw_1_dep_val = $("#ws_p1_cost").text();
            pw_1_dep_val = pw_1_dep_val.substring(1, pw_1_dep_val.length-1);       //Strip $ amd m
            cashbalance += parseFloat(pw_1_dep_val);                               //turn it back into a number

            //Pick up new radio button values and show
            var $checked = $radiosw_1.filter(function() {
               return $(this).prop('checked');
            });
            var $ws_p1 = $checked.val().split('|');
            var pw_1_new_value = $ws_p1.pop();
            var pw_1_new_name = $ws_p1.pop();

            // Update RHS fields
            $("#ws_p1_cost").text('$'+pw_1_new_value+'m');
            $("#ws_p1_name").text(pw_1_new_name);

            //update teamTotalCost - first get OTHER driver cost
            pw_2_dep_val = $("#ws_p2_cost").text()
            pw_2_dep_val = pw_2_dep_val.substring(1, pw_2_dep_val.length-1);
            teamTotalCost = parseFloat(pw_1_new_value) + parseFloat(pw_2_dep_val);
            teamTotalCost = teamTotalCost.toFixed(1);
            $("#ws_total_cost").text('$' + teamTotalCost + 'm');

            //deduct new driver cost from cashbalance
            cashbalance -= parseFloat(pw_1_new_value);

            //round it.
            cashbalance = cashbalance.toFixed(1);
            $("#ws_total_cash_left").text('$'+cashbalance+'m');
            // Show Budget red if negative
            if(cashbalance < 0){$('#ws_total_cash_left').css('color', 'red');}else{$('#ws_total_cash_left').css('color', '#A3A4AB');}
            //Test values for both drivers present and enough budget before enabling UPDATE button
            if (cashbalance < 0 || parseFloat(pw_1_new_value) < 1 || parseFloat(pw_2_dep_val) < 1)
               {$('input[name="WS_submit"]').attr('disabled','disabled');}
            else
               {$('input[name="WS_submit"]').removeAttr('disabled');}
         });

///////////WS Driver 2 selector change///////////////////////////
         var $radiosw_2 = $('input[name="pw_2_picker"]');

         $radiosw_2.change(function() {
            //Get Cash balance
            cashbalance = $("#ws_total_cash_left").text();
            cashbalance = parseFloat(cashbalance.substring(1, cashbalance.length-1));

            //Change Title First time
            $("#ws_budget_title").text("New Team Picks:");

            //add departing driver cost to cashbalance
            pw_2_dep_val = $("#ws_p2_cost").text();
            pw_2_dep_val = pw_2_dep_val.substring(1, pw_2_dep_val.length-1);            //Strip $ amd m
            cashbalance += parseFloat(pw_2_dep_val);                               //turn it back into a number

            //Pick up new radio button values and show
            var $checked = $radiosw_2.filter(function() {
               return $(this).prop('checked');
            });
            var $ws_p2 = $checked.val().split('|');
            var pw_2_new_value = $ws_p2.pop();
            var pw_2_new_name  = $ws_p2.pop();

            // Update RHS fields
            $("#ws_p2_cost").text('$'+pw_2_new_value+'m');
            $("#ws_p2_name").text(pw_2_new_name);

            //update teamTotalCost - first get OTHER driver cost
            pw_1_dep_val = $("#ws_p1_cost").text()
            pw_1_dep_val = pw_1_dep_val.substring(1, pw_1_dep_val.length-1);
            teamTotalCost = parseFloat(pw_2_new_value) + parseFloat(pw_1_dep_val);
            teamTotalCost = teamTotalCost.toFixed(1);
            $("#ws_total_cost").text('$' + teamTotalCost + 'm');

            //deduct new driver cost from cashbalance
            cashbalance -= parseFloat(pw_2_new_value);
            //round it.
            cashbalance = cashbalance.toFixed(1);
            //show new cash balance
            $("#ws_total_cash_left").text('$'+cashbalance+'m');
            // Show Budget red if negative
            if(cashbalance < 0){$('#ws_total_cash_left').css('color', 'red');}else{$('#ws_total_cash_left').css('color', '#A3A4AB');}
            //Test values for both drivers present before enabling UPDATE button
            if (cashbalance < 0 || parseFloat(pw_2_new_value) < 1 || parseFloat(pw_1_dep_val) < 1)
               {$('input[name="WS_submit"]').attr('disabled','disabled');}
            else
               {$('input[name="WS_submit"]').removeAttr('disabled');}
         });
/////////// END WS Driver 2 selector change///////////////////////////

      });

{% endblock %}
<!---------------------- JAVASCRIPT BLOCK  ------------------->
